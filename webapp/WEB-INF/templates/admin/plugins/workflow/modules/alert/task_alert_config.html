<#assign idDirectory = -1>
<#assign positionEntryDirectoryDate = -1>
<#assign idStateAfterDeadline = -1>
<#assign nbDaysToDate = 0>
<#if config?exists>
	<#assign idDirectory = config.idDirectory>
	<#assign positionEntryDirectoryDate = config.positionEntryDirectoryDate>
	<#assign idStateAfterDeadline = config.idStateAfterDeadline>
	<#assign nbDaysToDate = config.nbDaysToDate>
</#if>
<fieldset>
	<legend>#i18n{module.workflow.alert.task_alert_config.title}</legend>
		<label for="idDirectory">#i18n{module.workflow.alert.task_alert_config.label_task_directory} *</label>
		<@combo name="idDirectory" items=list_directories default_value=idDirectory />
		<button class="btn btn-primary btn-small" type="submit" name="apply">
			<i class="icon-ok-sign icon-white"></i>&nbsp;#i18n{module.workflow.alert.task_alert_config.label_apply}
		</button>
		<#if retrieval_types?? && retrieval_types?has_content>
			<label for="idRetrievalType" class="radio">#i18n{module.workflow.alert.task_alert_config.label_task_retrieval_type} *
			<#list retrieval_types as retrieval_type>
				<input type="radio" name="idRetrievalType" value="${retrieval_type.idType!}" <#if config?? && retrieval_type.idType = config.idRetrievalType>checked="checked"</#if>>&nbsp;${retrieval_type.getTitle( locale )}
			</#list>
			</label>
		</#if>
		<#if config?? && config.idRetrievalType = 1 && list_entries_date??>
			<label for="positionEntryDirectoryDate">#i18n{module.workflow.alert.task_alert_config.label_task_entry_directory_date} * :</label>
			<@combo name="positionEntryDirectoryDate" items=list_entries_date default_value=positionEntryDirectoryDate />&nbsp;
			<p class="help-block">#i18n{module.workflow.alert.task_alert_config.label_task_entry_directory_date_comment}</p>
		</#if>
		<#if list_states?exists>
			<label for="idStateAfterDeadline">#i18n{module.workflow.alert.task_alert_config.label_task_id_state_after_deadline} * :</label>
			<@combo name="idStateAfterDeadline" items=list_states default_value=idStateAfterDeadline />&nbsp;
			<p class="help-block">#i18n{module.workflow.alert.task_alert_config.label_task_id_state_after_deadline_comment}</p>
		</#if>
		<label for="nbDaysToDate">#i18n{module.workflow.alert.task_alert_config.label_task_nb_days_to_date} *</label>
		<input type="text" name="nbDaysToDate" size="3" maxlength="3" value="${nbDaysToDate}" />
		<p class="help-block">#i18n{module.workflow.alert.task_alert_config.label_task_nb_days_to_date_comment}</p>
</fieldset>
